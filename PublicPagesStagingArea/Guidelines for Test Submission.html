<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Guidelines for XPath and XQuery Full Text 1.0 Test Suite Submissions</title>
</head>
<body>
<p><img alt="W3C" src="http://www.w3.org/Icons/WWW/w3c_home.gif" /></p>
<h1 style="text-align: center;">Guidelines for XPath and XQuery Full Text 1.0 Test Suite Submissions</h1>
<h2>Licensing Issues and Acceptance</h2>
<ul type="disc">
<li>Tests submissions must use the <a href=
"http://www.w3.org/2002/09/wbs/1/testgrants2-200409/">Grant II:
Grant of License for Contributed test Cases Published Outside a W3C
Recommendation</a>. This license grant, for non-participant
test case Contributors, is described <a href="http://www.w3.org/2004/10/27-testcases.html">Policies for Contribution of Test Cases to W3C</a>.</li>
<li>The XML Query Working Group and XSL Working Group will, at their sole discretion, determine
what tests are incorporated in the test suite.</li>
</ul>
<h2><b>Conformance to Schemas and File Format</b></h2>
<ul type="disc">
<li>Submissions must be valid with respect to "XQFTTSCatalog.xsd" schema file.</li>
<li>All submissions must be in a ZIP, tar or gzip file formats.</li>
<li>Please add your test cases to the "XQFTTSCatalogSubmission.xml" document that we have provided.</li>
</ul>
<h2><b>Test Structure</b></h2>
<ul type="disc">
<li>Entries in the catalogue file <strong>should</strong> contain citations of document sections, using both the section number and section name,
whenever possible. This practice is highly recommended.  A typical test catalogue entry is illustrated below.</li>
</ul>
<table style = "solid" border = "1"  align="center">
<tr>
<td>&lt;test-case name="test001" FilePath="ftor" ... &gt;<br/>
  ...<br/>
  &lt;query name="test001.xq" date="2007-12-25"&gt;<br/>
   &lt;description&gt;Test of Full Text &quot;or&quot; operator &lt;/description&gt;<br/>
  &lt;/query&gt;<br/>
  &lt;input-file role="principal-data" context="default" variable="input-context"&gt;TreeCompass&lt;/input-file&gt;<br/>
  &lt;output-file role="principal" compare="XML"&gt;test001.xml&lt;/output-file&gt;<br/>
 &lt;/test-case&gt;<br/>
</td>
</tr>
</table>
<ul type="disc">
<li>Tests for which the &lt;input-file&gt; element in the catalog file references the "emptydoc" file are not required
to make any variable mapping back to the &lt;input-file&gt; element.</li>
<li>Submitters <strong>should</strong> indicate any potential problems with the
tests.</li>
<li>Negatives tests will be accepted. However, they <strong>must</strong> be
identified as such in the catalog file.  Please see the <a href="#Error-Tests">Error Tests</a> Section below for futher
information.  A typical negative test is illustrated below:</li>
</ul>
<p></p>
<table style = "solid"  border= "1" align="center">
<tr>
<td>
  <p>(:  Name:  test001 :)<br/>
  (: Test Description:  window qualfier with non-numeric argument :)<br />
  (: Pass the string 'five' to external variable $var :) <br />
  declare $var external<br />
  /book/title ftcontains "web" ftand "site"<br />
  ftand "usability" window {$var} words</p>
  </td>
</tr>
</table>
<ul type="disc">
<li>Variable names, function names, etc., <strong>should not</strong> contain any
copyrighted information or any company name or any other text
identifying a company.</li>
<li>Submitted tests <strong>should</strong> be minimal in nature and independent of
one another.</li>
<li>Submitted tests <strong>must</strong> at least include a &ldquo;Name&rdquo;
comment and a &ldquo;Description&rdquo; comment. These
comments <strong>must</strong> appear as the first two lines of the file.</li>
<li>Submitters <strong>should</strong> reuse existing input files whenever
possible.</li>
<li>Submitted tests <strong>should</strong> be insensitive to boundary-space, that is, in direct 
element constructors there should be no boundary space between open/close tags and enclosed 
expression.</li>
<li>Tests involving the decimal and integer data types <strong>should</strong> use no more than 18 digits.</li>
<li>Test involving the data types xs:date, xs:time, xs:dateTime, xs:gYear, xs:gYearMonth,
the maximum value of the year component <strong>should</strong> be no more than 4 digits, and the maximum number of
fractional second digits <strong>must</strong> be no more than 3.</li>
<li>For tests involving the int, long, short and byte data types, please see the <a href="http://www.w3.org/TR/xmlschema-2/">Schema</a> specifications for limits 
on those data types.</li> 
<li>For tests cases that are sensitive to typed values, submittors will provide a result for 
both the typed and untyped data.</li>
<li>For test cases where typed data is imperative, submittors will need to use 
constructor functions instead of relying on typed data.</li>
<li>Submitted tests for a particular section <strong>must</strong> include only
functionality defined by that section and by the provided
required features. The Full Text Task Force defines the
following features as core features:</li>
</ul>
<table frame = "border" style="solid" border = "1" width = "550" align="center">
<tr>
<td><h4>Feature Name</h4></td>
<td><h4>Comments</h4></td>
</tr>
<tr>
<td>TO BE SUPPLIED </td>
<td>&nbsp;</td>
</tr>
<tr>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
</tr>
<tr>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
</tr>
<tr>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
</tr>
</table>
<h2>Languages, Collations, and URIs</h2>
<ul type="disc">
<li>When no language is specified, English is assumed. Tests <strong>must</strong> be written with that in mind. </li>
<li>When no collation is specified, the Unicode-Codepoint collation
  is assumed. Tests <strong>should</strong> be written with that in mind.</li>
<li>URI&rsquo;s <strong>must</strong> be based on the <a href="http://www.example.com/">www.example.com</a> domain.</li>
</ul>
<h2>Static Typing</h2>
<ul type="disc">
<li>Submitted tests <strong>should</strong> obey the Static Typing rules, except for
tests intended to evaluate violations of the Static Typing
rules.</li>
<li>Submitted tests <strong>must</strong> not rely on any static typing
extensions.</li>
</ul>
<h2>Optional Features and vendor Specific Features</h2>
<ul type="disc">
<li>Submitted tests that evaluate non-optional features <strong>should not</strong>use optional features.</li>
<li>Submitted tests <strong>should not</strong> include any vendor specific
extensions (pragmas).</li>
</ul>
<h2>Error Tests</h2>
<p>Error conditions that can be mapped to the conditions specified
in the appendices of the Full Text specification <strong>should</strong> include the
error code stated for that condition. The following example
from the catalog file illustrates one of such conditions:</p>
<table style="solid" border = "1" width = "700" align="center">
<tr>
<td align = "left"><p>REWRITE EXAMPLE TO USE FULL TEXT EXPRESSIONS </p>
  <p>&lt;test-case name=&quot;Literals036&quot; FilePath=&quot;Expressions/PrimaryExpr/Literals/&quot; scenario=&quot;parse-error&quot; Creator=&quot;John Doe&quot;&gt;<br/>
&lt;description&gt;Test for invalid decimal literal&lt;/description&gt;<br/>
&lt;spec-citation spec=&quot;XQuery&quot; section-number=&quot;3.1.1&quot; section-title=&quot;Literals&quot; section-pointer=&quot;id-literals&quot;/&gt;<br/>
&lt;query name=&quot;Literals036.xq&quot; date=&quot;2005-02-03&quot;/&gt;<br/>
&lt;input-file role=&quot;principal-data&quot; variable=&quot;input-context&quot;&gt;emptydoc&lt;/input-file&gt;<br/>
&lt;expected-error&gt;XPST0003&lt;/expected-error&gt;<br/>
&lt;/test-case&gt;</p></td></tr>
</table>
<h2>XML and Namespaces</h2>
<ul type="disc">
<li>Submitted tests <strong>should</strong> be independent of XML versions
&ldquo;1.0&rdquo; and &ldquo;1.1&rdquo; and XML Namespaces versions
&ldquo;1.0&rdquo; and &ldquo;1.1&rdquo; features unless the purpose
is to evaluate those features.</li>
</ul>
<h2>XML Encoding</h2>
<ul type="disc">
<li>Submitted tests <strong>should</strong> use UTF-8 encoding.</li>
</ul>
<h2>Related Specifications</h2>
<ul type="disc">
<li>Submitted tests <strong>should</strong> be based exclusively on the XQuery
specification, the Functions and Operators
specification, and the Full Text specification. </li>
</ul>
<h2>XPath Compatibility</h2>
<ul type="disc">
<li>The test-group element in the catalog may have the optional
attribute is-XPath2="no". If this attribute is not present,
when it is assumed that all descendent test cases may or may not be
XPath 2.0 tests.</li>
<li>The test-case element in the catalog may have the optional
attribute is-XPath2="yes|no". If this attribute is not
present, then it is assumed that this test case may or may not be
an XPath 2.0 test. If any test-group ancester of this element
has is-XPath2="no", then this test-case element cannot have
is-XPath2="yes". Over time, all test-case elements will have
this attribute defined.</li>
</ul>
<h2>Results and Serialization</h2>
<ul type="disc">
<li>Tests in the XQFTTS test suite rely on the serialized form of the test
result in order to check correctness. Thus, any feature whose effect is
not captured as part of the serialized result of a query, <strong>should </strong>be
explicitly checked as part of the test query itself. For example, typing
information is not present in the serialized results of an XQuery
expression.</li>
</ul>
<h2>Expected Results</h2>
<ul type="disc">
<li>Submitters <strong>must</strong> provide expected results for all submitted
tests.</li>
<li>When serializing content of a typed element where the type is
atomic, any lexical representation of the value may be serialized.
To minimize the number of expected results per test case, the
input value used to construct the typed element should be identical
to the result if this input value was cast to xs:string. If
this is true, then only one expected result with the serialized
value in its original lexical form is required for this test case.
However, if the intent of the testcase is to test other
lexical representations, then two expected results must be created
where one result would contain the value if it was cast to
xs:string, and the other in its original lexical form</li>
</ul>
<hr /> 
<address> 
  <a href="http://www.w3.org/Help/Webmaster">Webmaster</a> · Last modified: 
  $Date: 2008/12/23 22:13:11 $ by $Author: jmelton $ 
</address> 
<p><a rel="Copyright" 
href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> 
© 1994-2007<a href="http://www.w3.org/"><acronym 
title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a 
href="http://www.csail.mit.edu/"><acronym 
title="Massachusetts Institute of Technology">MIT</acronym></a>, <a 
href="http://www.ercim.org/"><acronym 
title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, 
<a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a 
href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, 
<a 
href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>, 
<a rel="Copyright" 
href="http://www.w3.org/Consortium/Legal/copyright-documents">document 
use</a> and <a rel="Copyright" 
href="http://www.w3.org/Consortium/Legal/copyright-software">software 
licensing</a> rules apply. Your interactions with this site are in accordance 
with our <a 
href="http://www.w3.org/Consortium/Legal/privacy-statement#Public">public</a> 
and <a 
href="http://www.w3.org/Consortium/Legal/privacy-statement#Members">Member</a> 
privacy statements.</p> 
</body>
</html>
